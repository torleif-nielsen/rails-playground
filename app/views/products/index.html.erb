<div class="container-fluid">
  <div class="row">
    <div class="col-sm-12">
      <p id="notice"><%= notice %></p>

      <h1>Products</h1>
      <%= select_tag(:category                     ,
                    options_for_select(@categories),
                    class: "form-control")       %>
    </div>
  </div>

  <hr>

  <div class="row" id="products_list">
    <div class="col-sm-12">
      <%= render "products_list", products: @products %>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <%= link_to 'New Product', new_product_path,
                                class: "btn btn-success" %>
    </div>
  </div>
</div>

<script>
  $("#category").on("change", function(e){
    console.log($("#category").val());

    $.ajax({
      url: "/products/filter_products" ,
      dataType: "script"               ,
      method: "GET"                    ,
      data: {
        category_id: $("#category").val()
      }
    })
  });
</script>
